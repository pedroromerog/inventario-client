<div class="flex flex-col {{ class }}">
    <label class="{{ labelClass }} mb-1 text-sm font-medium" *ngIf="label">
        {{ label
        }}<em
            *ngIf="required || formControlInput.hasValidator(requiredValidator)"
            >*</em
        >
    </label>
    <p-select
        [options]="transformedOptions"
        [formControl]="formControlInput"
        class="h-10"
        optionLabel="{{ optionLabel }}"
        optionValue="{{ optionValue }}"
        [filter]="filter"
        [editable]="editable"
        [showClear]="showClear"
        [filterBy]="filterBy"
        [placeholder]="placeholder"
        [virtualScroll]="lazy"
        [fluid]="fluid"
        [invalid]="
            formControlInput.invalid &&
            (formControlInput.dirty || formControlInput.touched)
        "
        [virtualScrollItemSize]="38"
        appendTo="body"
        styleClass="custom-dropdown {{ styleClass }} w-full"
        (onChange)="onSelectionChange($event)"
    >
        <ng-template #selectedItem let-selectedOption>
            <div class="flex items-center gap-2" *ngIf="selectedOption">
                <div>{{ selectedOption[optionLabel] }}</div>
            </div>
        </ng-template>
        <ng-template let-opcion pTemplate="item">
            <div style="white-space: normal; word-break: break-word">
                {{ opcion[optionLabel] }}
            </div>
        </ng-template>
    </p-select>
    <div
        *ngIf="
            formControlInput.invalid &&
            (formControlInput.dirty || formControlInput.touched) &&
            showError
        "
        class="min-h-4"
    >
        <app-input-errors
            [formControlInput]="formControlInput"
        ></app-input-errors>
    </div>
</div>
